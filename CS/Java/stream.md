# 4.1 ìŠ¤íŠ¸ë¦¼ì´ë€

ìë°” 8 APIì— ìƒˆë¡œ ì¶”ê°€ëœ ê¸°ëŠ¥.

ìŠ¤íŠ¸ë¦¼ì„ ì´ìš©í•˜ë©´ ì„ ì–¸í˜•ìœ¼ë¡œ ì»¬ë ‰ì…˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

ë°ì´í„° ì²˜ë¦¬ ì—°ì‚°ì„ ì§€ì›í•˜ë„ë¡ì†ŒìŠ¤ì—ì„œ ì¶”ì¶œëœ ì—°ì†ëœ ìš”ì†Œ.

**ì¼ë‹¨ ìŠ¤íŠ¸ë¦¼ì€ ë°ì´í„° ì»¬ë ‰ì…˜ ë°˜ë³µì„ ë©‹ì§€ê²Œ ì²˜ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì´ë¼ ìƒê°í•˜ê¸°** ğŸ™‚

### ìë°” 7ê³¼ ìë°” 8 (ìŠ¤íŠ¸ë¦¼ ì‚¬ìš©)ì˜ ì°¨ì´

```java
//--------------------------------------------------------------------------------------
//ë°ì´í„° ì„ ì–¸
//--------------------------------------------------------------------------------------

public static class Dish {
    private int calories;
    private String name;
    private boolean vegetarian;
    private Type type;

    public enum Type { MEAT, FISH, OTHER}

    public Dish(int calories, String name, boolean vegetarian, Type type) {
        this.calories = calories;
        this.name = name;
        this.vegetarian = vegetarian;
        this.type = type;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getCalories() {
        return calories;
    }

    public void setCalories(int calories) {
        this.calories = calories;
    }
}

//--------------------------------------------------------------------------------------
// ë¡œì§
//--------------------------------------------------------------------------------------

List<Dish> menu = Arrays.asList(
        new Dish(800, "pork", false, Dish.Type.MEAT ),
        new Dish(700, "beef", false, Dish.Type.MEAT ),
        new Dish(400, "chicken", false, Dish.Type.MEAT ),
        new Dish(530, "french fries", true, Dish.Type.OTHER ),
        new Dish(350, "rice", true, Dish.Type.OTHER ),
        new Dish(120, "season fruit", true, Dish.Type.OTHER ),
        new Dish(450, "salmon", false, Dish.Type.FISH )
);

List<Dish> lowCaloricDishees = new ArrayList<>();

// 400 ì¹¼ë¡œë¦¬ ì´í•˜ ìš”ë¦¬ ì„ íƒ.
for(Dish dish : menu) {
    if(dish.getCalories() < 400) {
        lowCaloricDishees.add(dish);
    }
}

// ìš”ë¦¬ ì •ë ¬
Collections.sort(lowCaloricDishees, new Comparator<Dish>() {
    @Override
    public int compare(Dish o1, Dish o2) {
        return Integer.compare(o1.getCalories(), o2.getCalories());
    }
});

// ì •ë ¬ëœ ìš”ë¦¬ ì´ë¦„ ì„ íƒ
List<String> lowCaloriDishesName = new ArrayList<>();
for(Dish dish : lowCaloricDishees) {
    lowCaloriDishesName.add(dish.getName());
}
```

```java
List<String> lowCaloriDishesName =
        menu.stream()
                .filter(d -> d.getCalories() < 400) // 400ì¹¼ë¡œë¦¬ ì´í•˜ì˜ ìš”ë¦¬ ì„ íƒ
                .sorted(Comparator.comparing(Dish::getCalories)) // ì¹¼ë¡œë¦¬ë¡œ ìš”ë¦¬ë¥¼ ì •ë ¬
                .map(Dish::getName)// ìš”ë¦¬ëª…ì„ ì¶”ì¶œ
                .collect(Collectors.toList()); // ëª¨ë“  ìš”ë¦¬ëª…ì„ ë¦¬ìŠ¤íŠ¸ì— ì €ì¥

// parallelStream : ë³‘ë ¬ë¡œ ì‹¤í–‰.
List<String> lowCaloriDishesNameParallel =
        menu.parallelStream()
                .filter(d -> d.getCalories() < 400) // 400ì¹¼ë¡œë¦¬ ì´í•˜ì˜ ìš”ë¦¬ ì„ íƒ
                .sorted(Comparator.comparing(Dish::getCalories)) // ì¹¼ë¡œë¦¬ë¡œ ìš”ë¦¬ë¥¼ ì •ë ¬
                .map(Dish::getName)// ìš”ë¦¬ëª…ì„ ì¶”ì¶œ
                .collect(Collectors.toList()); // ëª¨ë“  ìš”ë¦¬ëª…ì„ ë¦¬ìŠ¤íŠ¸ì— ì €ì¥
```

### ìŠ¤íŠ¸ë¦¼ ì¥ì 

1. ì„ ì–¸í˜•ìœ¼ë¡œ ì½”ë“œë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŒ.
    
    â†’ ìë°” 7ë²„ì „ê³¼ ê°™ì´ ë£¨í”„ì™€ if ì¡°ê±´ë¬¸ë“±ì˜ ì œì–´ ë¸”ëŸ­ì„ ì‚¬ìš©í•´ì„œ ì–´ë–»ê²Œ ë™ì‘ì„ êµ¬í˜„í• ì§€ ì§€ì •í•  í•„ìš”ì—†ì´. â€˜ì €ì¹¼ë¡œë¦¬ì˜ ìš”ë¦¬ë§Œ ì„ íƒí•˜ë¼â€™ ë¼ëŠ” ë™ì‘ì˜ ìˆ˜í–‰ì„ ì§€ì •í•  ìˆ˜ ìˆìŒ.
    
2. filter, sorted, map, collect ê°™ì€ ì—¬ëŸ¬ ë¹Œë”© ë¸”ëŸ­ ì—°ì‚°ì„ ì—°ê²°í•´ì„œ ë³µì¡í•œ ë°ì´í„° ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ì„ ë§Œë“¤ ìˆ˜ ìˆìŒ. â†’ ì¡°ë¦½ì´ ê°€ëŠ¥í•˜ë©° ìœ ì—°ì„±ì´ ì¢‹ì•„ì§.
3. ë³‘ë ¬í™”ë¡œ ì¸í•´ ì„±ëŠ¥ì´ ì¢‹ì•„ì§.

# 4.2 ìŠ¤íŠ¸ë¦¼ ì‹œì‘í•˜ê¸°

### ìŠ¤íŠ¸ë¦¼ì´ë€.

**`ë°ì´í„° ì²˜ë¦¬ ì—°ì‚°`**ì„ ì§€ì›í•˜ë„ë¡ **`ì†ŒìŠ¤`**ì—ì„œ ì¶”ì¶œëœ **`ì—°ì†ëœ ìš”ì†Œ`**.

`ì—°ì†ëœ ìš”ì†Œ`

ìŠ¤íŠ¸ë¦¼ì€ íŠ¹ì • ìš”ì†Œ í˜•ì‹ìœ¼ë¡œ ì´ë¤„ì§„ ì—°ì†ëœ ê°’ ì§‘í•©ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•¨.

**ì»¬ë ‰ì…˜** : ìë£Œêµ¬ì¡°ì´ë¯€ë¡œ ArrayListë‚˜ LinkedList ë“±ì„ ì‚¬ìš©í•  ê²ƒì¸ì§€ì— ëŒ€í•œ ì‹œê°„ê³¼ ê³µê°„ì˜ ë³µì¡ì„±ê³¼ ê´€ë ¨ëœ ìš”ì†Œ ì €ì¥ ë° ì ‘ê·¼ ì—°ì‚°ì´ ì£¼ë¥¼ ì´ë£¸.

**ìŠ¤íŠ¸ë¦¼** : filter, sorterd, map ì²˜ëŸ¼ í‘œí˜„ ê³„ì‚°ì‹ì„ ì£¼ë¥¼ ì´ë£¸.

 â†’ ì¦‰, ì»¬ë ‰ì…˜ì˜ ì£¼ì œëŠ” ë°ì´í„°ì´ê³  ìŠ¤íŠ¸ë¦¼ì˜ ì£¼ì œëŠ” ê³„ì‚°ì„.

 `ì†ŒìŠ¤`

ìŠ¤íŠ¸ë¦¼ì€ ì»¬ë ‰ì…˜, ë°°ì—­, I/Oìì›ë“±ì˜ ë°ì´í„° ì œê³µ ì†ŒìŠ¤ë¡œë¶€í„° ë°ì´í„°ë¥¼ ì†Œë¹„í•¨.

ì¦‰, ë¦¬ìŠ¤íŠ¸ë¡œ ìŠ¤íŠ¸ë¦¼ì„ ë§Œë“¤ë©´ ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†ŒëŠ” ë¦¬ìŠ¤íŠ¸ì˜ ìš”ì†Œì™€ ê°™ì€ ìˆœì„œë¥¼ ìœ ì§€í•¨.

`ë°ì´í„° ì²˜ë¦¬ ì—°ì‚°`

filter, map, reduce,find, match, sortë“±ìœ¼ë¡œ ë°ì´í„°ë¡œ ì¡°ì‘í•  ìˆ˜ ìˆìœ¼ë©°, ìŠ¤íŠ¸ë¦¼ ì—°ì‚°ì€ ìˆœì°¨ì ìœ¼ë¡œ ë˜ëŠ” ë³‘ë ¬ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆìŒ.

### ìŠ¤íŠ¸ë¦¼ì˜ ì£¼ìš” íŠ¹ì§• 2ê°€ì§€

1. íŒŒì´í”„ë¼ì´ë‹(Pipelining)
    
    ëŒ€ë¶€ë¶„ì˜ ìŠ¤íŠ¸ë¦¼ ì—°ì‚°ì€ ìŠ¤íŠ¸ë¦¼ ì—°ì‚°ë¼ë¦¬ ì—°ê²°í•´ì„œ ì»¤ë‹¤ë€ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì„±í•  ìˆ˜ ìˆë„ë¡ ìŠ¤íŠ¸ë¦¼ ìì‹ ì„ ë°˜í™˜í•¨.
    
    â†’ ì´ ë•ë¶„ì— ê²Œìœ¼ë¦„(Laziness), ì‡¼íŠ¸ì„œí‚·(short-circuiting)ê³¼ ê°™ì€ ìµœì í™”ë„ ì–»ì„ ìˆ˜ ìˆìŒ ( 5ì¥ì—ì„œ ì„¤ëª…)
    
    ì—°ì‚° íŒŒì´í”„ë¼ì¸ì€ ë°ì´í„° ì†ŒìŠ¤ì— ì ìš©í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì§ˆì˜ì™€ ë¹„ìŠ·í•¨.
    
2. ë‚´ë¶€ ë°˜ë³µ
    
    ë°˜ë³µìë¥¼ ì´ìš©í•´ì„œ ëª…ì‹œì ìœ¼ë¡œ ë°˜ë³µí•˜ëŠ” ì»¬ë ‰ì…˜ê³¼ ë‹¬ë¦¬ ìŠ¤íŠ¸ë¦¼ì€ ë°°ë¶€ë°˜ë³µì„ ì§€ì›í•¨. 
    

### ì˜ˆì œ ê¸°ë°˜ ì¶”ê°€ ì„¤ëª…

```java
List<String> lowCaloriDishesName =
    menu.stream() // ë©”ë‰´ì—ì„œ ìŠ¤íŠ¸ë¦¼ì„ ì–»ìŒ
            .filter(d -> d.getCalories() < 400) // íŒŒì´í”„ë¼ì¸ ì—°ì‚°ë§Œë“¤ê¸°. ì²«ë²ˆì¨°ë¡œ 400ì´í•˜ í•„í„°.
            .sorted(Comparator.comparing(Dish::getCalories)) // ì¹¼ë¡œë¦¬ë¡œ ìš”ë¦¬ë¥¼ ì •ë ¬
            .map(Dish::getName)// ìš”ë¦¬ëª…ì„ ì¶”ì¶œ
						.limit(3) // ì„ ì°©ìˆœ 3ê°œë§Œ ì„ íƒ
            .collect(Collectors.toList()); // ê²°ê³¼ë¥¼ ë‹¤ë¥¸ ë¦¬ìŠ¤íŠ¸ë¡œ ì €ì¥
```

ì—¬ê¸°ì„œ `ë°ì´í„° ì†ŒìŠ¤`ëŠ” ìŠ¤íŠ¸ë¦¼ì„ ì–»ì€ menuì„.

`ë°ì´í„° ì†ŒìŠ¤`ëŠ” `ì—°ì†ëœ ìš”ì†Œ`ë¥¼ ìŠ¤íŠ¸ë¦¼ì— ì œê³µí•¨.

ë‹¤ìŒìœ¼ë¡œ ìŠ¤íŠ¸ë¦¼ì— filter, map, limit, collectë¡œ ì´ì–´ì§€ëŠ” ì¼ë ¨ì˜ `ë°ì´í„° ì²˜ë¦¬ì—°ì‚°`ì„ ì ìš©í•¨.

**íŒŒì´í”„ë¼ì¸ì€ ì†ŒìŠ¤ì— ì ìš©ë˜ëŠ” ì§ˆì˜ ê°™ì€ ì¡´ì¬.**

ë§ˆì§€ë§‰ìœ¼ë¡œ collectì—°ì‚°ìœ¼ë¡œ íŒŒì´í”„ë¼ì¸ì„ ì²˜ë¦¬í•´ì„œ ê²°ê³¼ë¥¼ ë°˜í™˜í•¨.

( ë§ˆì§€ë§‰ collectë¥¼ í˜¸ì¶œí•˜ë¦¬ ì „ê¹Œì§€ëŠ” menuì—ì„œ ë¬´ì—‡ë„ ì„ íƒë˜ì§€ ì•Šìœ¼ë©°, ì¶œë ¥ ê²°ê³¼ë„ ì—†ìŒ )

**collect** : ìŠ¤íŠ¸ë¦¼ì„ ë‹¤ë¥¸ í˜•ì‹ìœ¼ë¡œ ë³€í™˜.

# 4.3 ìŠ¤íŠ¸ë¦¼ê³¼ ì»¬ë ‰ì…˜

ë°ì´í„°ë¥¼ ì–¸ì œ ê³„ì‚°í•˜ëŠëƒê°€ ì»¬ë ‰ì…˜ê³¼ ìŠ¤íŠ¸ë¦¼ì˜ ê°€ì¥ í° ì°¨ì´.

ì»¬ë ‰ì…˜ì€ í˜„ì¬ ìë£Œêµ¬ì¡°ê°€ í¬í•¨í•˜ëŠ” ëª¨ë“  ê°’ì„ ë©”ëª¨ë§ ì €ì¥í•˜ëŠ” ìë£Œêµ¬ì¡°ì„.

( ì¦‰, ì»¬ë ‰ì…˜ì˜ ëª¨ë“  ìš”ì†ŒëŠ” ì»¬ë ‰ì…˜ì— ì¶”ê°€í•˜ê¸° ì „ì— ê³„ì‚°ë¨ )

ìŠ¤íŠ¸ë¦¼ì€ ì´ë¡ ì ìœ¼ë¡œ ìš”ì²­í•  ë•Œë§Œ ìš”ì†Œë¥¼ ê³„ì‚°í•˜ëŠ” ê³ ì •ëœ ìë£Œêµ¬ì¡°ì„.

( ë”°ë¼ì„œ ìŠ¤íŠ¸ë¦¼ì— ìš”ì†Œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ìŠ¤íŠ¸ë¦¼ì—ì„œ ìš”ì†Œë¥¼ ì œê±°í•  ìˆ˜ ì—†ìŒ )

### ë”± í•œ ë²ˆë§Œ íƒìƒ‰.

ìŠ¤íŠ¸ë¦¼ë„ í•œ ë²ˆë§Œ íƒìƒ‰í•  ìˆ˜ ìˆìŒ. ì¦‰. íƒìƒ‰ëœ ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†ŒëŠ” ì†Œë¹„ë¨.

â†’ ë”°ë¼ì„œ í•œ ë²ˆ íƒìƒ‰í•œ ìš”ì†Œë¥¼ ë‹¤ì‹œ íƒìƒ‰í•˜ë ¤ë©´ ì´ˆê¸° ë°ì´í„° ì†ŒìŠ¤ì—ì„œ ìƒˆë¡œìš´ ìŠ¤íŠ¸ë¦¼ì„ ë§Œë“¤ì–´ì•¼ í•¨.

### ì™¸ë¶€ë°˜ë³µê³¼ ë‚´ë¶€ë°˜ë³µ

ì™¸ë¶€ë°˜ë³µ(External Iteration) : ì»¬ë ‰ì…˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì‚¬ìš©ìê°€ ì§ì ‘ ìš”ì†Œë¥¼ ë°˜ë³µí•´ì•¼í•¨ ( for-each ì™€ ê°™ì´ )

ë‚´ë¶€ë°˜ë³µ(Internal Iteration) : ìŠ¤íŠ¸ë¦¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë°˜ë³µì„ ì•Œì•„ì„œ ì²˜ë¦¬í•˜ê³  ê²°ê³¼ ìŠ¤íŠ¸ë¦¼ê°’ì„ ì–´ë”˜ê°€ì— ì €ì¥í•¨.

( ì¦‰, í•¨ìˆ˜ì— ì–´ë–¤ ì‘ì—…ì„ ìˆ˜í–‰ í•  ì§€ë§Œ ì§€ì •í•˜ë©´ ëª¨ë“  ê²ƒì´ ì•Œì•„ì„œ ì²˜ë¦¬ë¨ )

# 4.4 ìŠ¤íŠ¸ë¦¼ ì—°ì‚°

ìŠ¤íŠ¸ë¦¼ ì¸í„°í˜ì´ìŠ¤ ì—°ì‚°ì€ í¬ê²Œ 2ê°€ì§€ë¡œ êµ¬ë¶„ê°€ëŠ¥

1. `ì¤‘ê°„ì—°ì‚°(Intermediate Operation)` : ì—°ê²°í•  ìˆ˜ ìˆëŠ” ìŠ¤íŠ¸ë¦¼ ì—°ì‚°
2. `ìµœì¢…ì—°ì‚°(Terminal Operation)` : ìŠ¤íŠ¸ë¦¼ì„ ë‹«ëŠ” ì—°ì‚°

```java
List<String> lowCaloriDishesName =
    menu.stream() // ë©”ë‰´ì—ì„œ ìŠ¤íŠ¸ë¦¼ì„ ì–»ìŒ
            .filter(d -> d.getCalories() < 400) // ì¤‘ê°„ì—°ì‚°
            .sorted(Comparator.comparing(Dish::getCalories)) // ì¤‘ê°„ì—°ì‚°
            .map(Dish::getName) // ì¤‘ê°„ì—°ì‚°
            .collect(Collectors.toList()); // ìµœì¢…ì—°ì‚°
```

### ì¤‘ê°„ì—°ì‚°

**filterë‚˜ sorted ê°™ì€ ì¤‘ê°„ì—°ì‚°ì€ ë‹¤ë¥¸ ìŠ¤íŠ¸ë¦¼ì„ ë°˜í™˜í•¨.**

ë”°ë¼ì„œ ì—¬ëŸ¬ ì¤‘ê°„ ì—°ì‚°ì„ ì—°ê²°í•´ì„œ ì§ˆì˜ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŒ.

ì¤‘ê°„ ì—°ì‚°ì˜ ì¤‘ìš”í•œ íŠ¹ì§•ì€ **ë‹¨ë§ ì—°ì‚°ì„ ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì— ì‹¤í–‰í•˜ê¸° ì „ê¹Œì§€ëŠ” ì•„ë¬´ ì—°ì‚°ë„ ìˆ˜í–‰í•˜ì§€ ì•ŠìŒ**. â†’ ì¦‰ ê²Œìœ¼ë¥´ë‹¤(Lazy)ëŠ” ê²ƒ.

â†’ **ì´ëŠ” ì¤‘ê°„ì—°ì‚°ì„ í•©ì¹œ ë‹¤ìŒì— í•©ì³ì§„ ì¤‘ê°„ì—°ì‚°ì„ ìµœì¢…ì—°ì‚°ìœ¼ë¡œ í•œ ë²ˆì— ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸**

### ìµœì¢…ì—°ì‚°

ìµœì¢…ì—°ì‚°ì€ **ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì—ì„œ ê²°ê³¼ë¥¼ ë„ì¶œí•¨.**

ë³´í†µ ìµœì¢…ì—°ì‚°ì— ì˜í•´ List, Integer, void ë“± **ìŠ¤íŠ¸ë¦¼ ì´ì™¸ì˜ ê²°ê³¼ê°€ ë°˜í™˜ë¨.**

### ìŠ¤íŠ¸ë¦¼ ì´ìš©í•˜ê¸°.

ìŠ¤íŠ¸ë¦¼ ì´ìš©ê³¼ì •ì€ 3ê°€ì§€.

1. ì •ì˜ë¥¼ ìˆ˜í–‰í•  ( ì»¬ë ‰ì…˜ ê°™ì€ ) ë°ì´í„° ì†ŒìŠ¤
2. ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì„±í•  ì¤‘ê°„ ì—°ì‚° ì—°ê²°
3. ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì„ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ ë§Œë“¤ ìµœì¢…ì—°ì‚°